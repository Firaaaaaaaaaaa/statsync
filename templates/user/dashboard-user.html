{% extends "base/base-user.html" %} {% block title %}Dashboard - StatSync{% endblock %} {% block content %}
<div class="pagetitle">
  <h1>Dashboard</h1>
  <nav>
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="{% url 'dashboard-user' %}">Home</a></li>
      <li class="breadcrumb-item active"><a href="{% url 'dashboard-user' %}">Dashboard</a></li>
    </ol>
  </nav>
</div>
<!-- End Page Title -->

<section class="section dashboard">
  <div class="row">
    <!-- Left side columns -->
    <div class="col-lg-15">
      <div class="row">
        <!-- BRS Uploaded by User -->
        <div class="col-xxl-6 col-md-6 fade-in">
          <div class="card info-card sales-card">
            <div class="card-body text-center">
              <h5 class="card-title">Total BRS Uploaded by User</h5>
              <div class="d-flex align-items-center justify-content-center">
                <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                  <i class="bi bi-cloud-check"></i>
                </div>
                <div class="ps-3">
                  <h6 class="fs-1 fw-bold">{{ user_brs_count }}</h6>
                  <!-- Ukuran font lebih besar -->
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- End BRS Uploaded by User -->

        <!-- All BRS Uploaded -->
        <div class="col-xxl-6 col-md-6 fade-in">
          <div class="card info-card revenue-card">
            <div class="card-body text-center">
              <h5 class="card-title">Total BRS Uploaded</h5>
              <div class="d-flex align-items-center justify-content-center">
                <div class="card-icon rounded-circle d-flex align-items-center justify-content-center">
                  <i class="bi bi-cloud-arrow-up"></i>
                </div>
                <div class="ps-3">
                  <h6 class="fs-1 fw-bold">{{ total_brs_count }}</h6>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- End All BRS Uploaded -->

        <script>
          document.addEventListener("DOMContentLoaded", function () {
            console.log("Chart script loaded");
            const chartCategories = JSON.parse('{{ chart_categories|escapejs }}');
            const chartData = JSON.parse('{{ chart_data|escapejs }}');
            
            console.log("Categories:", chartCategories);
            console.log("Data:", chartData);
            
            const options = {
              series: [{ name: "Total BRS", data: chartData }],
              chart: { height: 350, type: "bar", toolbar: { show: false } },
              colors: ["#4154f1"],
              dataLabels: { enabled: false },
              xaxis: { categories: chartCategories },
              yaxis: { title: { text: "Total BRS" } },
            };
            new ApexCharts(document.querySelector("#weeklyChart"), options).render();
          });
        </script>       
          
          <!-- Grafik Mingguan --> 
          <div class="col-12">
            <div class="card"> 
              <div class="card-body"> 
                <h5 class="card-title text-center">BRS Uploaded - {{ month_name }}</h5> 
                <div id="weeklyChart"></div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- End Left side columns -->
    </div>
  </section>
{% endblock %}